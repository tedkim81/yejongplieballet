{% load static from staticfiles %}
{% load tags %}

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width"/>
  <title>YEJONG PLIE BALLET</title>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <link rel="shortcut icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon">
  <link rel="icon" href="{% static 'img/favicon.ico' %}" type="image/x-icon">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=PFk4_yg96tmkviyKL7rT&submodules=geocoder"></script>
  <style type="text/css">
  html, body {
    height: 100%;
  }
  .anchor-style {
    text-decoration: none;
  }
  .no-margin {
    margin: 0;
  }
  .no-padding {
    padding: 0;
  }
  .clear {
    clear: both;
  }
  .bg-layer {
    width: 100%; height: 100%; position: fixed; left: 0; top: 0; background: url('{% static 'img/main_img3.jpg' %}') no-repeat center top; background-size: auto 100%; background-color: #D1D3CF;
  }
  .main-layer {
    width: 100%; display: none;
  }
  .intro-blank {
    background-color: #fcfcfc; opacity: 0.3;
  }
  .btn {
    background-color: #d2bb91; color: white; position: relative;
  }
  .btn:hover {
    color: #eeeeee;
  }
  .btn-default-width {
    width: 300px;
  }
  .color-gray {
    color: gray;
  }
  .section-title {
    width: 100%; height: 50px; line-height: 50px; background-color: #ffffff; border-bottom: 1px solid #ddd; border-top: 1px solid #ddd; color: #555; font-size: 20px; text-align: center; clear: both; position: relative;
  }
  .section-title-about { z-index: 50; } .about { z-index: 49; }
  .section-title-teachers { z-index: 100; } .teachers { z-index: 99; }
  .section-title-timetable { z-index: 200; } .timetable { z-index: 199; }
  .section-title-location { z-index: 300; } .location { z-index: 299; }
  .section-title-community { z-index: 400; } .community { z-index: 399; }
  .section-title-gallery { z-index: 500; } .gallery { z-index: 499; }
  .section-title-foreigner { z-index: 600; } .foreigner-wrap { z-index: 599; }
  .section-container {
    overflow-y: hidden; position: relative; background-color: white;
  }
  .teacher-info {
    padding-top: 15px; padding-bottom: 15px; position: relative;
  }
  .teacher-img-wrap {
    width: 100px; position: absolute;
  }
  .teacher-img {
    width: 100px; height: 100px; border-radius: 50px;
  }
  .teacher-name {
    width: 100px; text-align: center; padding-top: 30px; margin-top: -10px; font-size: 16px; color: #555; background-color: white;
  }
  .teacher-text {
    padding-left: 115px;
  }
  .teacher-text div {
    font-size: 15px; font-weight: bold; color: #ab9375;
  }
  .teacher-text ul {
    list-style: none; padding-left: 0;
  }
  .bi-layer {
    position: fixed; left: 0; top: 0; width: 100%; height: 100%; display: none; z-index: 1000; border-bottom: 1px solid #ddd;
  }
  .bi-bg {
    position: absolute; width: 100%; height: 100%; background-color: #ffffff; opacity: 0;
  }
  .bi {
    width: 250px; height: 250px; position: absolute; opacity: 0.9;
  }
  .bi-title {
    font-size: 30px; font-weight: bold; color: #555; position: absolute; width: 250px; text-align: center;
  }
  .menu-layer {
    position: fixed; left: 0; top: 0; width: 100%; z-index: 1000;
  }
  .menu-modal {
    position: absolute; width: 100%; background-color: black; opacity: 0.8; display: none;
  }
  .btn-menu {
    width: 40px; height: 40px; position: absolute; top: 5px; right: 10px; z-index: 1100; display: block; text-align: center;
  }
  .btn-menu-open {
    width: 26px; margin-top: 8px;
  }
  .btn-menu-close {
    width: 22px; margin-top: 8px; display: none;
  }
  .btn-menus {
    width: 60%; position: absolute; top: 44px; right: -60%; z-index: 1100; background-color: white;
  }
  .btn-menus div {
    height: 50px; line-height: 50px; text-align: center; border-bottom: 1px solid #ddd;
  }
  .about {
    padding-top: 15px; padding-bottom: 30px;
  }
  .about-img {
    width: 100%;
  }
  .about-img img {
    width: 100%;
  }
  .about-text {
    width: 100%; margin-top: 15px;
  }
  .about-text-1 {
    font-size: 20px;
  }
  .about-text-2 {
    font-size: 16px;
  }
  .btn-about-more {
    text-align: center;
  }
  .teachers {
    padding-bottom: 30px;
  }
  .timetable {
    position: relative; width: 100%; background-color: white;
  }
  .timetable-header-wrap {
    width: 100%; height: 90px; clear: both; position: relative; z-index: 250;
  }
  .timetable-table {
    position: relative; height: 840px;
  }
  .timetable-times-wrap {
    width: 100%; height: 40px; background-color: white; -ms-overflow-style: none; overflow-x: auto;
  }
  .timetable-times-wrap::-webkit-scrollbar {
    display: none;
  }
  .timetable-times {
    width: 820px; height: 100%;
  }
  .timetable-times .col-weekdays {
    width: 50px; height: 100%; line-height: 40px; vertical-align: middle; text-align: center; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd; float: left;
  }
  .timetable-times .col-time {
    width: 70px; height: 100%; line-height: 26px; padding-top: 7px; vertical-align: middle; text-align: center; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd; float: left;
  }
  .timetable-times .col-time .timeline-wrap {
    width: 100%; height: 7px;
  }
  .timetable-times .col-time .timeline-wrap .timeline {
    width: 25%; height: 7px; border-right: 1px solid #ddd; float: left;
  }
  .timetable-days {
    position: absolute; left: 0; background-color: white; width: 50px;
  }
  .timetable-days div {
    width: 50px; height: 120px; border-right: 1px solid #ddd; border-bottom: 1px solid #ddd; text-align: center; line-height: 120px; vertical-align: middle; background-color: white;
  }
  .timetable-body-wrap {
    width: 100%; position: absolute; padding-left: 50px; -ms-overflow-style: none; overflow-x: auto;
  }
  .timetable-body {
    width: 770px;
  }
  .timetable-body div {
    width: 100%; height: 40px; border-bottom: 1px solid #ddd; position: relative;
  }
  .timetable-body div div {
    display: inline-block; width: 100px; height: 40px; text-align: center; padding-top: 14px; font-size: 11px; line-height: 11px; position: absolute; top: 0;
  }
  .timetable-notice {
    padding: 15px 15px 0 30px; margin: 0; background-color: white;
  }
  .timetable-more {
    padding: 30px 16px;
  }
  .timetable-more-title {
    font-size: 16px; font-weight: bold; color: #ab9375;
  }
  .timetable-more-btns .btn {
    width: 100%; margin-top: 10px;
  }
  .location {
    width: 100%; position: relative; background-color: white; padding: 0 15px 15px 15px;
  }
  .location .location-title {
    font-size: 16px; font-weight: bold; padding-top: 15px; color: #ab9375;
  }
  .location .location-text {
    padding: 5px 10px 0 10px;
  }
  .location .subway-img {
    width: 100%; border: 1px solid #ddd; margin-top: 10px;
  }
  .location .address-img {
    width: 100%; border: 1px solid #ddd; margin-top: 10px;
  }
  .map-wrap {
    width: 100%; height: 360px; border: 1px solid #ddd; margin-top: 10px; position: relative;
  }
  .map-wrap #map {
    width: 100%; height: 100%;
  }
  .map-wrap .map-mask {
    width: 100%; height: 100%; position: absolute; top: 0; right: 0; background-color: rgba(255, 255, 255, 0.8);
    padding: 30px; text-align: center; line-height: 20px; opacity: 0;
  }
  .inmap {
    padding: 15px;
  }
  .inmap .location-text {
    height: 20px;
  }
  .inmap .btn {
    margin-left: 10px;
  }
  .community {
    width: 100%; padding-top: 15px; padding-bottom: 30px; position: relative; background-color: white;
  }
  .community .community-title {
    font-size: 16px; font-weight: bold; padding-top: 15px; color: #ab9375; clear: both;
  }
  .community .community-text {
    height: 40px; padding: 0 10px;
  }
  .community .col-xs-12 {
    margin-top: 15px; padding: 0;
  }
  .community .button-box {
    border: 1px solid #ddd; padding: 15px;
  }
  .community .buttons .btn {
    color: white; margin-top: 10px; margin-right: 5px;
  }
  .btn-naver {
    background-color: #1EC545;
  }
  .btn-naver img {
    width: 14px; margin-top: -2px; margin-right: 5px;
  }
  .btn-instagram {
    background-color: #833ab4;
  }
  .btn-instagram img {
    width: 20px;
    margin-right: 5px;
  }
  .btn-facebook {
    padding-left: 5px; background-color: #4468B0;
  }
  .btn-facebook img {
    width: 22px; margin-top: -4px;
  }
  .gallery {
    width: 100%; padding-bottom: 30px; position: relative; clear: both; background-color: white;
  }
  .gallery .container {
    padding: 0 15px;
  }
  .gallery .col-xs-12 {
    padding: 0; margin: 0;
  }
  .gallery img {
    width: 100%; margin-top: 15px;
  }
  .foreigner-wrap {
    padding-top: 15px; position: relative; clear: both; background-color: white;
  }
  .foreigner {
    margin-bottom: 30px; font-size: 16px;
  }
  .footer {
    color: white; background-color: #404042; padding-top: 20px; padding-bottom: 20px; margin-top: 30px;
  }
  .footer-text {
    padding: 5px;
  }
  @media all and (min-width:768px) {
    .btn-menu {
      display: none;
    }
    .btn-menus {
      width: 100%; text-align: right; position: absolute; top: 0; z-index: 1100; background-color: transparent; display: block;
    }
    .btn-menus div {
      display: inline-block; height: 50px; text-align: center; line-height: 50px; vertical-align: middle; cursor: pointer; font-size: 16px; font-weight: bold; color: #555; margin: 0 10px; border-bottom: none;
    }
    .cont-area {
      width: 1040px; margin: auto;
    }
    .about-img {
      width: 50%; float: left;
    }
    .about-img img {
      border-radius: 20px;
    }
    .about-text {
      width: 50%; float: left; padding: 10px 30px;
    }
    .btn-about-more {
      text-align: left;
    }
    .teacher-img-wrap {
      width: 200px;
    }
    .teacher-img {
      width: 200px; height: 200px; border-radius: 100px;
    }
    .teacher-name {
      width: 200px;
    }
    .teacher-text {
      padding-left: 280px;
    }
    .timetable-times {
      width: 1040px;
    }
    .timetable-times .col-time {
      width: 90px;
    }
    .timetable-body {
      width: 990px;
    }
    .timetable-more {
      padding: 30px 0;
    }
    .timetable-more-btns .btn {
      width: 300px; margin-right: 10px;
    }
    .timetable-times-wrap, .timetable-table {
      border-left: 1px solid #ddd; border-right: 1px solid #ddd;
    }
    .location .subway-img {
      width: 330px; height: 330px; margin-right: 10px; float: left;
    }
    .location .address-img {
      width: 330px; height: 330px; margin-right: 10px; float: left;
    }
    .map-wrap {
      width: 330px; height: 330px; margin-top: 10px; display: inline-block;
    }
    .community .col-xs-12 {
      width: 33%; margin-top: 0;
    }
    .community .button-box {
      margin-left: 7px; margin-right: 7px;
    }
    .community .community-text {
      font-size: 16px;
    }
    .community .btn {
      width: 300px;
    }
    .btn-phone {
      display: none;
    }
    .gallery .col-xs-12 {
      width: 33.3%; padding: 0 7px;
    }
    .footer .container {
      padding-left: 0; padding-right: 0; margin-left: 0; margin-right: 0; width: 1040px; margin: auto;
    }
  }
  .btn-menus .active {
    color: #927f67; border-bottom: 4px solid #927f67;
  }
  </style>
</head>
<body>
  <div class="bg-layer"></div>
  <div class="main-layer">
    <div class="intro-blank"></div>
    <div class="section-container section-about">
      <div class="section-title section-title-about">ABOUT</div>
      <div class="cont-area about container">
        <div class="about-img">
          <img src="{% static 'img/about_img1.jpg' %}" />
        </div>
        <div class="about-text">
          {{ commoninfo.about_text|safe }}
          <div class="btn-about-more">
            <a href="javascript:moveToIntro();" class="btn btn-default-width">예종플리에 발레아카데미 소개 더보기</a>
          </div>
        </div>
        <div class="clear"></div>
      </div>
    </div>
    <div class="section-container section-teachers">
      <div class="section-title section-title-teachers">FACULTY</div>
      <div class="cont-area teachers container">
      {% for teacher in teachers %}
        <div class="teacher-info">
          <div class="teacher-img-wrap">
            <img class="teacher-img" src="{{ teacher.profile_image.url }}" />
            <div class="teacher-name">{{ teacher.name|safe }}</div>
          </div>
          <div class="teacher-text">
            {{ teacher.introduce|safe }}
          </div>
        </div>
      {% endfor %}
        <div class="text-right">
          <a href="javascript:moveToTeachers();" class="btn btn-default-width">강사 정보 더보기</a>
        </div>
      </div>
    </div>
    <div class="section-container section-timetable">
      <div class="timetable-header-wrap">
        <div class="section-title section-title-timetable">CLASSES</div>
        <div class="cont-area timetable-times-wrap">
          <div class="timetable-times">
            <div class="col-weekdays"></div>
            <div class="col-time">11시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">12시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">1시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">2시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">3시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">4시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">5시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">6시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">7시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">8시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
            <div class="col-time">9시<div class="timeline-wrap"><div class="timeline"></div><div class="timeline"></div><div class="timeline"></div></div></div>
          </div>
        </div>
      </div>
      <div class="cont-area timetable">
        <div class="timetable-table">
          <div class="timetable-body-wrap">
            <div class="timetable-body">
              <div class="timetable-1-1"></div><div class="timetable-1-2"></div><div class="timetable-1-3"></div>
              <div class="timetable-2-1"></div><div class="timetable-2-2"></div><div class="timetable-2-3"></div>
              <div class="timetable-3-1"></div><div class="timetable-3-2"></div><div class="timetable-3-3"></div>
              <div class="timetable-4-1"></div><div class="timetable-4-2"></div><div class="timetable-4-3"></div>
              <div class="timetable-5-1"></div><div class="timetable-5-2"></div><div class="timetable-5-3"></div>
              <div class="timetable-6-1"></div><div class="timetable-6-2"></div><div class="timetable-6-3"></div>
              <div class="timetable-7-1"></div><div class="timetable-7-2"></div><div class="timetable-7-3"></div>
            </div>
          </div>
          <div class="timetable-days">
            <div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div><div>일</div>
          </div>
        </div>
        <ul class="timetable-notice">
          {{ commoninfo.timetable_text|safe }}
        </ul>
        <div class="timetable-more">
          <div class="timetable-more-title">수업 내용 및 등록 안내 바로가기</div>
          <div class="timetable-more-btns">
            <a href="{{ commoninfo.class_link_1 }}" target="_blank" class="btn">전공반</a>
            <a href="{{ commoninfo.class_link_2 }}" target="_blank" class="btn">어린이 취미반</a>
            <a href="{{ commoninfo.class_link_3 }}" target="_blank" class="btn">성인 취미반</a>
          </div>
        </div>
      </div>
    </div>
    <div class="section-container section-location">
      <div class="section-title section-title-location">LOCATION</div>
      <div class="cont-area location">
        {{ commoninfo.location_text|safe }}
        <div class="location-title">약도 / 지도</div>
        <img class="subway-img" src="{% static 'img/address_subway.jpg' %}" />
        <img class="address-img" src="{% static 'img/address_street.jpg' %}" />
        <div class="map-wrap">
          <div id="map"></div>
          <div class="map-mask"><a href="javascript:hideMapMask();">여기를 클릭하시면,<br>지도를 확대/축소/이동하실 수 있습니다.</a></div>
        </div>
      </div>
    </div>
    <div class="section-container section-community">
      <div class="section-title section-title-community">CONTACT/SNS</div>
      <div class="cont-area community container">
        {{ commoninfo.contact_text|safe }}
        <div class="community-title">공지사항/상담실 바로가기</div>
        <div class="buttons">
          <a href="javascript:moveToNotice();" class="btn btn-notice">공지사항</a>
          <a href="javascript:moveToCS();" class="btn btn-cs">온라인 상담실</a>
        </div>
        <div class="community-title">SNS 바로가기</div>
        <div class="buttons">
          <a href="{{ commoninfo.navercafe_link }}" class="btn btn-naver" target="_blank"><img src="{% static 'img/icon_naver.png' %}" /><span>카페</span></a>
          <a href="{{ commoninfo.instagram_link }}" target="_blank">
            <button class="btn btn-instagram"><img src="{% static 'img/icon_instagram.png' %}" /><span>인스타그램</span></button>
          </a>
          <a href="{{ commoninfo.facebook_link }}" target="_blank">
            <button class="btn btn-facebook"><img src="{% static 'img/icon_facebook.png' %}" /><span>페이스북</span></button>
          </a>
        </div>
        <div class="community-title">협력업체</div>
        <div class="buttons">
          <a href="{{ commoninfo.vdenie_link }}" class="btn btn-vdenie" target="_blank">브이데니에</a>
          <a href="{{ commoninfo.sungnamvallet_link }}" class="btn btn-sungnamvallet" target="_blank">성남시티발레단</a>
        </div>
      </div>
    </div>
    <div class="section-container section-gallery">
      <div class="section-title section-title-gallery">GALLERY</div>
      <div class="cont-area gallery container">
      {% for galleryarr in galleries %}
        <div class="col-xs-12">
        {% for gallery in galleryarr %}
          <img src="{{ gallery.photo.url }}" />
        {% endfor %}
        </div>
      {% endfor %}
      </div>
    </div>
    <div class="section-container section-foreigner">
      <div class="section-title section-title-foreigner">FOREIGNER</div>
      <div class="foreigner-wrap">
        <div class="cont-area foreigner container">
          {{ commoninfo.foreigner_text|safe }}
        </div>
        <div class="footer">
          <div class="container">
            {{ commoninfo.footer_text|safe }}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="bi-layer">
    <div class="bi-bg"></div>
    <img class="bi" src="{% static 'img/bi-circle.png' %}" />
    <div class="bi-title">예종 플리에 발레</div>
  </div>
  <div class="menu-layer">
    <div class="menu-modal"></div>
    <div class="btn-menu">
      <img class="btn-menu-open" src="{% static 'img/btn_menu.png' %}" />
      <img class="btn-menu-close" src="{% static 'img/btn_close.png' %}" />
    </div>
    <div class="btn-menus">
      <div class="btn-menu-item btn-menu-about" data-section-class=".section-title-about">ABOUT</div>
      <div class="btn-menu-item btn-menu-teachers" data-section-class=".section-title-teachers">FACULTY</div>
      <div class="btn-menu-item btn-menu-timetable" data-section-class=".timetable-header-wrap">CLASSES</div>
      <div class="btn-menu-item btn-menu-location" data-section-class=".section-title-location">LOCATION</div>
      <div class="btn-menu-item btn-menu-community" data-section-class=".section-title-community">CONTACT/SNS</div>
      <div class="btn-menu-item btn-menu-gallery" data-section-class=".section-title-gallery">GALLERY</div>
      <div class="btn-menu-item btn-menu-foreigner" data-section-class=".section-title-foreigner">FOREIGNER</div>
    </div>
  </div>
  <div id="yjp-modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title"></h4>
        </div>
        <div class="modal-body"></div>
        <div class="modal-footer">
          <button type="button" class="btn" data-dismiss="modal">닫기</button>
        </div>
      </div>
    </div>
  </div>
  <script>
  $(".main-layer").show();
  $(".bi-layer").show();
  var windowHeight = $(window).height();
  var windowWidth = $(window).width();
  $(".bg-layer-wrap").height(windowHeight);
  $(".intro-blank").height(windowHeight);
  $(".menu-modal").height(windowHeight);
  var biSizeInit = $(".bi").width();
  var biTopInit = (windowHeight - biSizeInit) / 2 - 50;
  var biLeftInit = (windowWidth - biSizeInit) / 2;
  $(".bi").css({"left":biLeftInit+"px", "top":biTopInit+"px"});
  var biTitleTopInit = biTopInit + biSizeInit + 20;
  $(".bi-title").css({"left":biLeftInit+"px", "top":biTitleTopInit+"px"});
  var biTitleFontSizeInit = parseInt($(".bi-title").css("font-size"));
  var isMobile = ($(".btn-menu").css("display") == "block");
  var marginLeft = parseInt($(".teachers").css("margin-left"));
  if (!isMobile) {
    $(".btn-menus").css({"right":marginLeft+"px"});
  }
  
  // 각 섹션별로 자동 스크롤 시키기 위한 scrollTop 정보
  var sectionScrollInfo = {};
  var classNames = [
      [".section-title-about", ".about", ".btn-menu-about"],
      [".section-title-teachers", ".teachers", ".btn-menu-teachers"],
      [".timetable-header-wrap", ".timetable", ".btn-menu-timetable"],
      [".section-title-location", ".location", ".btn-menu-location"],
      [".section-title-community", ".community", ".btn-menu-community"],
      [".section-title-gallery", ".gallery", ".btn-menu-gallery"],
      [".section-title-foreigner", ".foreigner-wrap", ".btn-menu-foreigner"]
    ];
  var tmpScrollTop = $(".intro-blank").height() - 50;

  function setIntroHeight(introHeight) {
    $(".bg-layer").height(introHeight+"px");
    $(".bi-layer").height(introHeight+"px");
    var tmpVal = (windowHeight - introHeight) / (windowHeight - 50);
    var biSize = biSizeInit - (tmpVal * (biSizeInit - 40));
    var biTop = biTopInit - (tmpVal * (biTopInit - 5));
    var biLeft = biLeftInit - (tmpVal * (biLeftInit - 15 - marginLeft));
    $(".bi").css({"width":biSize+"px", "height":biSize+"px", "top":biTop+"px", "left":biLeft+"px"});
    $(".bi-bg").css({"height":introHeight+"px", "opacity":tmpVal});
    var biTitleTop = biTitleTopInit - (tmpVal * (biTitleTopInit - 10));
    var biTitleFontSize = biTitleFontSizeInit - (tmpVal * (biTitleFontSizeInit - 20));
    if (isMobile) {
      $(".bi-title").css({"top":biTitleTop+"px", "font-size":biTitleFontSize});
    } else {
      $(".bi-title").css({"top":biTitleTop+"px", "font-size":biTitleFontSize, "left":biLeft+"px"});
    }
  }

  var onScrollFunc = function() {
    // 인트로 부분 애니메이션 처리
    var scrollTop = $(window).scrollTop();
    var introHeight = windowHeight - scrollTop;
    if (introHeight < 50) {
      introHeight = 50;
    }
    setIntroHeight(introHeight);

    // 섹션 타이틀 영역 상단 고정 기능
    var selectedBtnMenuClass = null;
    classNames.forEach(function(classNameSet) {
      var headerHeight = $(classNameSet[0]).height();
      var compareScrollTop = sectionScrollInfo[classNameSet[0]];
      if (!isMobile) {
        compareScrollTop += 50;
      }
      $(classNameSet[2]).removeClass("active");
      if (scrollTop >= compareScrollTop) {
        if (isMobile) {
          $(classNameSet[0]).css({"position":"fixed", "top":"50px"});
        } else {
          $(classNameSet[0]).css({"position":"fixed", "top":"0"});
          selectedBtnMenuClass = classNameSet[2];
        }
        $(classNameSet[1]).css({"margin-top":headerHeight+"px"});
      } else {
        $(classNameSet[0]).css({"position":"relative", "top":"0"});
        $(classNameSet[1]).css({"margin-top":"0"});
      }
    });
    if (selectedBtnMenuClass) {
      $(selectedBtnMenuClass).addClass("active");
    }

    // 강사 소개의 강사 이미지 상단 고정 기능
    var tmpHeight = $(".intro-blank").height()+$(".section-about").height();
    $(".teacher-info").each(function(i, element) {
      if (scrollTop >= tmpHeight - 50) {
        $(element).find(".teacher-img-wrap").css({"position":"fixed", "top":"115px"});
      } else {
        $(element).find(".teacher-img-wrap").css({"position":"absolute", "top":"15px"});
      }
      tmpHeight += $(element).height() + 35;
    });
  };
  
  // 시간표 횡스크롤 2단 스크롤 sync
  $(".timetable-body-wrap").scroll(function() {
    $(".timetable-times-wrap").scrollLeft($(".timetable-body-wrap").scrollLeft());
  });
  $(".timetable-times-wrap").scroll(function() {
    $(".timetable-body-wrap").scrollLeft($(".timetable-times-wrap").scrollLeft());
  });

  // 모바일 시간표에서는 횡으로 중간쯤 pre scroll
  if (isMobile) {
    var preScrolled = $(".timetable-times .col-time").eq(0).outerWidth() * 4.5;
    $(".timetable-times-wrap").scrollLeft(preScrolled);
    $(".timetable-body-wrap").scrollLeft(preScrolled);
  } 

  // 시간표 내용 채우기
  var timetables = [];
  {% for tt in timetables %}
  timetables.push({
    "day_of_week":"{{ tt.day_of_week }}",
    "class_room":"{{ tt.class_room }}",
    "color":"{{ tt.color }}",
    "start_time":"{{ tt.start_time }}",
    "end_time":"{{ tt.end_time }}",
    "item_left":"{{ tt.get_item_left }}",
    "item_width":"{{ tt.get_item_width }}",
    "name":"{{ tt.classinfo.name }}",
    "classinfo_id":"{{ tt.classinfo.id }}"
  });
  {% endfor %}
  var classinfo_intros = {};
  var classinfo_color = {};
  {% for ci in classinfos %}
  classinfo_intros["{{ ci.id }}"] = "{{ ci.introduce|linebreaks }}";
  classinfo_color["{{ ci.id }}"] = "{{ ci.color }}";
  {% endfor %}

  function convertTimeString(raw_time) {
    var splited = raw_time.split(".");
    var hour = parseInt(splited[0]);
    if (hour > 12) {
      hour -= 12;
    }
    var minute = 0;
    if (splited.length > 1 && splited[1] > 0) {
      minute = 6 * parseInt(splited[1]);
      if (minute >= 60) {
        minute /= 10;
      }
    }
    if (minute > 0) {
      return hour+"시 "+minute+"분";
    } else {
      return hour+"시";
    }
  }
  function setTimetables() {
    var tt_item_width = $(".timetable-times .col-time").eq(0).outerWidth();
    $(".timetable-body div").empty();
    timetables.forEach(function (tt){
      $(".timetable-"+tt.day_of_week+"-"+tt.class_room).append("<div class='timetable-cell' data-classinfo-id='"+tt.classinfo_id+"' data-name='"+tt.name+"' data-start-time='"+convertTimeString(tt.start_time)+"' data-end-time='"+convertTimeString(tt.end_time)+"' data-toggle='modal' data-target='#yjp-modal' style='background-color:"+classinfo_color[tt.classinfo_id]+"; left:"+(tt.item_left*tt_item_width)+"px; width:"+(tt.item_width*tt_item_width)+"px; cursor: pointer;'>"+tt.name+"</div>");
    });
  }
  setTimetables();
  $(".timetable-cell").click(function() {
    var name = $(this).data("name");
    $("#yjp-modal .modal-title").html(name);
    var intro = "<div>시간: "+$(this).data("start-time")+" ~ "+$(this).data("end-time")+"</div>"
      + "<pre style='margin-top: 15px;'>"+classinfo_intros[$(this).data("classinfo-id")]+"</pre>";
    $("#yjp-modal .modal-body").html(intro);
  });

  // 메뉴 버튼
  function moveToScroll(scrollTop) {
    if (isMobile) {
      hideMenu();
    } else {
      scrollTop += 50;
    }
    $("html, body").animate({"scrollTop":scrollTop}, 200);
  }
  function showMenu() {
    isShowMenu = true;
    $(".btn-menu").css({"background-color":"white"});
    $(".btn-menu-open").hide();
    $(".btn-menu-close").show();
    $(".menu-modal").fadeIn();
    $(".btn-menus").animate({"right":0}, 200);
  }
  function hideMenu() {
    isShowMenu = false;
    $(".btn-menu").css({"background-color":"transparent"});
    $(".btn-menu-open").show();
    $(".btn-menu-close").hide();
    $(".menu-modal").fadeOut();
    $(".btn-menus").animate({"right":"-60%"}, 200);
  }
  var isShowMenu = false;
  $(".btn-menu").click(function() {
    if (isShowMenu) {
      hideMenu();
    } else {
      showMenu();
    }
  });
  $(".menu-modal").click(function() {
    hideMenu();
  });
  $(".btn-menu-item").click(function() {
    moveToScroll(sectionScrollInfo[$(this).data("section-class")]);
  });

  // 네이버 지도 출력
  var map = new naver.maps.Map('map');
  var myaddr = new naver.maps.Point(127.1120501, 37.3975112);
  map.setCenter(myaddr);
  // 마커 표시
  var marker = new naver.maps.Marker({
    position: myaddr,
    map: map
  });
  $(".map-mask").mouseover(function() {
    $(this).css("opacity", 1);
  });
  $(".map-mask").mouseout(function() {
    $(this).css("opacity", 0);
  });
  function hideMapMask() {
    $(".map-mask").hide();
  }
  function moveToIntro() {
    if (isMobile) {
      window.open("{{ commoninfo.about_link_m }}", "_blank");
    } else {
      window.open("{{ commoninfo.about_link_pc }}", "_blank");
    }
  }
  function moveToTeachers() {
    if (isMobile) {
      window.open("{{ commoninfo.teachers_link_m }}", "_blank");
    } else {
      window.open("{{ commoninfo.teachers_link_pc }}", "_blank");
    }
  }
  function moveToNotice() {
    if (isMobile) {
      window.open("{{ commoninfo.notice_link_m }}", "_blank");
    } else {
      window.open("{{ commoninfo.notice_link_pc }}", "_blank");
    }
  }
  function moveToCS() {
    if (isMobile) {
      window.open("{{ commoninfo.cs_link_m }}", "_blank");
    } else {
      window.open("{{ commoninfo.cs_link_pc }}", "_blank");
    }
  }
  
  $(document).ready(function() {
    setTimeout(function(){
      classNames.forEach(function(classNameSet) {
        sectionScrollInfo[classNameSet[0]] = tmpScrollTop;
        tmpScrollTop += $(classNameSet[0]).height() + parseInt($(classNameSet[1]).css("height"));
      });
    }, 1000);
    $(window).scroll(onScrollFunc);
  });
  </script>
</body>
</html>